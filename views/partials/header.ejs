<!DOCTYPE html>	
<html>
	<head>
		<meta charset="utf-8"/>
		<title>Awesome gallery here</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
		<link rel="stylesheet" href="/styles/style.css">
		<link rel="stylesheet" href="/styles/modal.css">
	</head>
	
<body>
  <% if (!currentUser) { %>
	<nav class="navbar navbar-dark justify-content-between py-0 px-1 pl-sm-2 pr-sm-3">
    <a id="githubLink" class="navbar-brand m-0" href="https://github.com/Lutnik/elements-with-node" target="new">
      <img class="img-fluid" src="/pic/GitHub-Mark-Light-64px.png" alt="Github"> 
    </a> 
    <ul class="navbar px-0" style="list-style: none">
      <li class="nav-item dropdown">
      <button class="text-white dropdown-toggle btn btn-success my-2 mx-1" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="loginButton">
        Login
      </button>
      <div class="dropdown-menu bg-dark text-white px-3" aria-labelledby="navbarDropdown">
        <form class="form-inline" action="/user/login" method="post">
          <label for="username">Username</label>
          <input type="text" class="form-control border border-success mb-2" placeholder="Username" name="username" aria-label="username" id="userInput">
          <input type="text" class="form-control d-none" name="path" value="<%= currentPage %>" aria-label="path">
          <label for="password">Password</label>
          <input type="password" class="form-control border border-success mb-2" placeholder="Password" name="password" aria-label="Password">
          <button class="btn btn-success my-2 px-3" type="submit">Login</button>
        </form>
        <a class="nav-link text-success px-0" href="/user/forgot">Forgotten password?</a>
      </div>
      </li>
      <li class="nav-item">
        <span class="navbar-text text-white p-2">
        ...or register:
      </span>
      </li>
      <li class="nav-item">
        <a class="btn btn-success" href="/user/register"> Register </a> 
      </li>
    </ul>   
	</nav>
  <script> 
    const loginBtn = document.querySelector('#loginButton');
    loginButton.addEventListener('click', () => {
      window.setTimeout(function () {
        let x = document.querySelector('#userInput');
        x.focus();
      }, 0);
    })
  </script>
<% } else { %>
  <nav class="navbar navbar-dark justify-content-between">
    <a id="githubLink" class="navbar-brand m-0" href="https://github.com/Lutnik/elements-with-node" target="new">
      <img class="img-fluid" src="/pic/GitHub-Mark-Light-64px.png" alt="Github"> 
    </a> 
    <div>
      <span class="navbar-text mx-3 text-white"> Welcome,  
        <a class="text-success" href="/user/details"><%= currentUser.username %> </a>
      </span>
      <a class="btn btn-success my-2 mx-1" href="/logout"> Logout </a>
    </div>
	</nav> 
<% } %>

<% if (flashError.length > 0) { %>
<div class="row mt-3 px-2 d-flex justify-content-center">
	<div class="alert alert-danger px-2 w-75 text-center" role="alert">
		<%= flashError %>
	</div>
</div>
<% } %>
	
<% if (flashSuccess.length > 0) { %>
<div class="row mt-3 px-2 d-flex justify-content-center">
	<div class="alert alert-success px-2 w-75 text-center" role="alert">
		<%= flashSuccess %>
	</div>
</div>
<% } %>